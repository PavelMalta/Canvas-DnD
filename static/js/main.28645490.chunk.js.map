{"version":3,"sources":["ui/components/figuresField/FiguresField.module.css","bll/figures-reducer.ts","ui/components/figuresField/figure/Figure.tsx","ui/components/figuresField/FiguresField.tsx","ui/components/canvasField/canvas/Canvas.tsx","ui/components/canvasField/CanvasField.tsx","ui/App.tsx","reportWebVitals.ts","bll/store.ts","bll/utils/localStorage-utils.ts","index.tsx","ui/components/canvasField/CanvasField.module.css","ui/App.module.css"],"names":["module","exports","initialState","figures","id","isCanvas","style","width","height","backgroundColor","borderRadius","margin","border","draggableFigureId","copyStatus","canvasFigures","chooseFigure","isCursorOverCanvas","mouseDown","changeCopyStatusAC","status","type","chooseFigureAC","figure","setIsCursorAC","setMouseDownAC","Figure","figureData","startDragging","draggable","display","flexDirection","onDragStart","FiguresField","useSelector","state","dispatch","useDispatch","figureId","dragStartedAC","className","s","figuresField","onDragOver","e","preventDefault","onDrop","map","item","Canvas","figureWidth","figureHeight","canvasRef","useRef","useEffect","ctx","current","getContext","clearRect","beginPath","forEach","drawFigure","document","onkeydown","key","lineWidth","strokeStyle","fillStyle","fillRect","x","y","strokeRect","stroke","arc","Math","PI","fill","canvasContainer","ref","onMouseDown","stopPropagation","pageX","offsetLeft","pageY","offsetTop","isCursorOnAnyFigure","cursorInFigure","onMouseUp","onMouseMove","addFigureAC","onMouseEnter","onMouseOut","CanvasField","canvasField","App","app","fieldsContainer","buttonContainer","onClick","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","rootReducer","combineReducers","action","draggableFigure","find","i","newCanvasFigure","v1","filter","store","createStore","serializedState","localStorage","getItem","JSON","parse","err","loadState","subscribe","stringify","setItem","saveState","getState","window","ReactDOM","render","getElementById"],"mappings":"0FACAA,EAAOC,QAAU,CAAC,aAAe,qC,8JCmB3BC,EAAe,CACjBC,QAHY,CAAC,CAACC,GAAI,IAAKC,UAAU,EAAOC,MAhBjB,CACvBC,MAAO,QACPC,OAAQ,QACRC,gBAAiB,OACjBC,aAAc,MACdC,OAAQ,OACRC,OAAQ,oBAUqD,CAACR,GAAI,IAAKC,UAAU,EAAOC,MAPjE,CACvBC,MAAO,QACPC,OAAQ,QACRC,gBAAiB,QACjBE,OAAQ,OACRC,OAAQ,qBAMRC,kBAAmB,GACnBC,YAAY,EACZC,cAAe,GACfC,aAAc,GACdC,oBAAoB,EACpBC,WAAW,GAiCFC,EAAqB,SAACC,GAAD,MAAsB,CAACC,KAAM,qBAAsBD,WAGxEE,EAAiB,SAACC,GAAD,MAA+B,CAACF,KAAM,gBAAiBE,WAExEC,EAAgB,SAACP,GAAD,MAAkC,CAACI,KAAM,gBAAiBJ,uBAC1EQ,EAAiB,SAACP,GAAD,MAAyB,CAACG,KAAM,iBAAkBH,c,OC1DnEQ,EAAoC,SAAC,GAAiC,IAAhCC,EAA+B,EAA/BA,WAAYC,EAAmB,EAAnBA,cAM3D,OACI,qBAAKC,WAAS,EAACvB,MAAO,CAACwB,QAAS,OAAQC,cAAe,UAAvD,SACI,qBAAKF,WAAS,EAACvB,MAAOqB,EAAWrB,MAAO0B,YANvB,WACrBJ,EAAcD,EAAWvB,UCJpB6B,EAAe,WAExB,IAAM9B,EAAU+B,aAAiD,SAAAC,GAAK,OAAIA,EAAMhC,QAAQA,WAClFiC,EAAWC,cAEXT,EAAgB,SAACU,GACnBF,EF6CqB,SAACE,GAAD,MAAuB,CAACjB,KAAM,eAAgBiB,YE7C1DC,CAAcD,KAgB3B,OACI,sBAAKE,UAAWC,IAAEC,aAAcV,YAdX,WACrBI,EAASjB,GAAmB,KAamCwB,WAVzC,SAACC,GACvBA,EAAEC,kBAS4FC,OANxE,SAACF,GACvBA,EAAEC,iBACFT,EFiCmC,CAACf,KAAM,0BE7B1C,UACI,yCACClB,EAAQ4C,KAAI,SAAAC,GAAI,OAAI,cAAC,EAAD,CAAsBrB,WAAYqB,EAAMpB,cAAeA,GAA1CoB,EAAK5C,W,gBCpBtC6C,EAAS,WAClB,IAEMC,EAAc,IACdC,EAAe,IAGfC,EAAYC,iBAAY,MACxBjB,EAAWC,cACXtB,EAAgBmB,aAAuD,SAAAC,GAAK,OAAIA,EAAMhC,QAAQY,iBAC9FC,EAAekB,aAAgD,SAAAC,GAAK,OAAIA,EAAMhC,QAAQa,gBACtFF,EAAaoB,aAAuC,SAAAC,GAAK,OAAIA,EAAMhC,QAAQW,cAC3EI,EAAYgB,aAAwC,SAAAC,GAAK,OAAIA,EAAMhC,QAAQe,aAEjFoC,qBAAU,WACN,IACMC,EADSH,EAAUI,QACNC,WAAW,MAC9BF,EAAIG,UAAU,EAAG,EAhBP,IACC,KAgBXH,EAAII,YACJ5C,EAAc6C,SAAQ,SAAArC,GACfA,EAAOnB,KAAOY,EAAaZ,IAC1ByD,EAAWtC,EAAQgC,QAG5B,CAACxC,EAAeC,IAEnBsC,qBAAU,WACN,IACMC,EADSH,EAAUI,QACNC,WAAW,MAC1BzC,GACA6C,EAAW7C,EAAcuC,GAE7BO,SAASC,UAAY,SAACnB,GACJ,WAAVA,EAAEoB,KAAoBhD,GACtBoB,EHgBqB,CAACf,KAAM,qBGbrC,CAACL,EAAcD,IAIlB,IAAM8C,EAAa,SAACtC,EAA0BgC,GAC1CA,EAAIU,UAAY,EACZ1C,EAAOnB,KAAOY,EAAaZ,KAC3BmD,EAAIU,UAAY,GAEpBV,EAAIW,YAAc,QACE,WAAhB3C,EAAOF,OAEPkC,EAAIY,UAAY,QAChBZ,EAAIa,SAAS7C,EAAO8C,EAAG9C,EAAO+C,EAAGpB,EAAaC,GAC9CI,EAAIgB,WAAWhD,EAAO8C,EAAG9C,EAAO+C,EAAGpB,EAAaC,GAChDI,EAAIiB,UAEY,WAAhBjD,EAAOF,OACPkC,EAAIY,UAAY,OAChBZ,EAAIkB,IACAlD,EAAO8C,EAAInB,GACX3B,EAAO+C,EAAInB,GACXD,GACA,EACA,EAAIwB,KAAKC,IACT,GAEJpB,EAAIqB,OACJrB,EAAIiB,SACJjB,EAAII,cAmEZ,OACI,qBAAKnB,UAAWC,IAAEoC,gBAAlB,SACI,wBAAQC,IAAK1B,EACLT,WA/DG,SAACC,GAChBA,EAAEC,kBA+DUkC,YA7DI,SAACnC,GACjBA,EAAEoC,kBACF,IAAMX,EAAIzB,EAAEqC,MAAQ7B,EAAUI,QAAQ0B,WAChCZ,EAAI1B,EAAEuC,MAAQ/B,EAAUI,QAAQ4B,UAElCC,GAAsB,EAC1BjD,EAASX,GAAe,IACxBV,EAAc6C,SAAQ,SAAArC,IAbH,SAAC8C,EAAWC,EAAW/C,GAAvB,OAAoD8C,EAAI9C,EAAO8C,GAAKA,EAAI9C,EAAO8C,EAAInB,GAAeoB,EAAI/C,EAAO+C,GAAKA,EAAI/C,EAAO+C,EAAInB,GAc5ImC,CAAejB,EAAGC,EAAG/C,KACrBa,EAASd,EAAeC,IACxB8D,GAAsB,MAIzBA,GACDjD,EAASd,EAAe,MA+ChBiE,UA3CE,WACdnD,EAASX,GAAe,KA2CZ+D,YAzCI,SAAC5C,GACjBA,EAAEoC,kBAEF,IAAMX,EAAIzB,EAAEqC,MAAQ7B,EAAUI,QAAQ0B,WAChCZ,EAAI1B,EAAEuC,MAAQ/B,EAAUI,QAAQ4B,UAElCpE,GAAgBE,GAChBkB,EHrDuD,CAACf,KAAM,cAAelB,QGqDvDY,EAAcgC,KAAI,SAAAxB,GAKpC,OAJIA,EAAOnB,KAAOY,EAAaZ,KAC3BmB,EAAO8C,EAAIA,EAAInB,GACf3B,EAAO+C,EAAIA,EAAInB,IAEZ5B,QA8BHuB,OAzBD,SAACF,GACZA,EAAEC,iBACFD,EAAEoC,kBACF,IAAMX,EAAIzB,EAAEqC,MAAQ7B,EAAUI,QAAQ0B,WAAahC,GAC7CoB,EAAI1B,EAAEuC,MAAQ/B,EAAUI,QAAQ4B,UAAYjC,GAC9CrC,GACAsB,EHxEe,SAACiC,EAAWC,GAAZ,MAA2B,CAACjD,KAAM,aAAcgD,IAAGC,KGwEzDmB,CAAYpB,EAAGC,KAoBhBoB,aAhBK,SAAC9C,GAClBR,EAASZ,GAAc,KAgBXmE,WAbG,SAAC/C,GAChBR,EAASZ,GAAc,KAaXjB,MA9IF,IA+IEC,OA9ID,SCRNoF,EAAc,WAGvB,IAAMxD,EAAWC,cAMjB,OACI,sBAAKG,UAAWC,IAAEoD,YAAa7D,YALP,WACxBI,EAASjB,GAAmB,KAI5B,UACI,wCACA,cAAC,EAAD,QCwBG2E,MAlCf,WAEI,IAAM1D,EAAWC,cACXrB,EAAekB,aAAgD,SAAAC,GAAK,OAAIA,EAAMhC,QAAQa,gBACtFC,EAAqBiB,aAAwC,SAAAC,GAAK,OAAIA,EAAMhC,QAAQc,sBACpFC,EAAYgB,aAAwC,SAAAC,GAAK,OAAIA,EAAMhC,QAAQe,aAgBnF,OACE,sBAAKsB,UAAWC,IAAEsD,IAAKpD,WAfG,SAACC,GACvBA,EAAEC,kBAcgD0C,UAR/B,SAAC3C,GAEhB5B,IAAiBC,GAAsBC,GACvCkB,ELqCyB,CAACf,KAAM,mBKhCxC,UACI,sBAAKmB,UAAWC,IAAEuD,gBAAlB,UACI,cAAC,EAAD,IACA,cAAC,EAAD,OAEJ,qBAAKxD,UAAWC,IAAEwD,gBAAlB,SACI,wBAAQC,QAlBW,WACvB9D,EL2C6B,CAACf,KAAM,mBK1BhC,iCCtBG8E,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,O,QCLRQ,EAAcC,YAAgB,CAChC1G,QPyB0B,WAAmF,IAAlFgC,EAAiF,uDAAvDjC,EAAc4G,EAAyC,uCAC5G,OAAQA,EAAOzF,MACX,IAAK,eACD,OAAO,2BAAIc,GAAX,IAAkBtB,kBAAmBiG,EAAOxE,WAChD,IAAK,uBACD,OAAO,2BAAIH,GAAX,IAAkBhC,QAASgC,EAAMhC,QAAQ4C,KAAI,SAAAC,GAAI,OAAIA,EAAK5C,KAAO+B,EAAMtB,kBAAlB,2BAA0CmC,GAA1C,IAAgD3C,UAAU,IAAQ2C,OAC3H,IAAK,qBACD,OAAO,2BAAIb,GAAX,IAAkBrB,WAAYgG,EAAO1F,SACzC,IAAK,aACD,IAAI2F,EAAkB5E,EAAMhC,QAAQ6G,MAAK,SAAAC,GAAC,OAAIA,EAAE7G,KAAO+B,EAAMtB,qBACzDqG,EAAkB,CAAC7C,EAAGyC,EAAOzC,EAAGC,EAAGwC,EAAOxC,EAAGjD,KAA6B,MAAvB0F,EAAgB3G,GAAa,SAAW,SAASA,GAAI+G,eAC5G,OAAO,2BAAIhF,GAAX,IAAkBpB,cAAc,GAAD,mBAAMoB,EAAMpB,eAAZ,CAA2BmG,MAC9D,IAAK,gBACD,OAAO,2BAAI/E,GAAX,IAAkBnB,aAAc8F,EAAOvF,SAC3C,IAAK,gBACD,OAAO,2BAAIY,GAAX,IAAkBpB,cAAeoB,EAAMpB,cAAcqG,QAAO,SAAAH,GAAC,OAAIA,EAAE7G,KAAO+B,EAAMnB,aAAaZ,MAAKY,aAAc,KACpH,IAAK,cACD,OAAO,2BAAImB,GAAX,IAAkBpB,cAAe+F,EAAO3G,UAC5C,IAAK,gBACD,OAAO,2BAAIgC,GAAX,IAAkBlB,mBAAoB6F,EAAO7F,qBACjD,IAAK,iBACD,OAAO,2BAAIkB,GAAX,IAAkBjB,UAAW4F,EAAO5F,YACxC,QACI,OAAOiB,MO7CNkF,EAAQC,YAAYV,ECNR,WACrB,IACI,IAAMW,EAAkBC,aAAaC,QAAQ,SAC7C,GAAwB,OAApBF,EACA,OAEJ,OAAOG,KAAKC,MAAMJ,GACpB,MAAOK,GACL,QDFsCC,IAI9CR,EAAMS,WAAW,YCEQ,SAAC3F,GACtB,IACI,IAAMoF,EAAkBG,KAAKK,UAAU5F,GACvCqF,aAAaQ,QAAQ,QAAST,GAChC,WDLFU,CAAU,CACN9H,QAASkH,EAAMa,WAAW/H,aAKlCgI,OAAOd,MAAQA,EEXfe,IAASC,OACL,cAAC,IAAD,CAAUhB,MAAOA,EAAjB,SACI,cAAC,EAAD,MAEJvD,SAASwE,eAAe,SAG5BnC,K,kBCdAnG,EAAOC,QAAU,CAAC,YAAc,iCAAiC,gBAAkB,uC,kBCAnFD,EAAOC,QAAU,CAAC,IAAM,iBAAiB,gBAAkB,6BAA6B,gBAAkB,gC","file":"static/js/main.28645490.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"figuresField\":\"FiguresField_figuresField__dxe6A\"};","import { v1 } from \"uuid\"\r\n\r\nexport const circleStyle = {\r\n    width: \"100px\",\r\n    height: \"100px\",\r\n    backgroundColor: \"blue\",\r\n    borderRadius: \"50%\",\r\n    margin: \"30px\",\r\n    border: \"1px solid black\"\r\n}\r\n\r\nexport const squareStyle = {\r\n    width: \"100px\",\r\n    height: \"100px\",\r\n    backgroundColor: \"green\",\r\n    margin: \"30px\",\r\n    border: \"1px solid black\"\r\n}\r\nconst figures = [{id: \"1\", isCanvas: false, style: circleStyle}, {id: \"2\", isCanvas: false, style: squareStyle}]\r\n\r\nconst initialState = {\r\n    figures: figures,\r\n    draggableFigureId: \"\",\r\n    copyStatus: true,\r\n    canvasFigures: [] as Array<CanvasFigureType>,\r\n    chooseFigure: {} as CanvasFigureType,\r\n    isCursorOverCanvas: false,\r\n    mouseDown: true\r\n}\r\n\r\nexport const figuresReducer = (state: InitialStateType = initialState, action: ActionType): InitialStateType => {\r\n    switch (action.type) {\r\n        case \"DRAG-STARTED\" :\r\n            return {...state, draggableFigureId: action.figureId}\r\n        case \"CHANGE-CANVAS-STATUS\" :\r\n            return {...state, figures: state.figures.map(item => item.id === state.draggableFigureId ? {...item, isCanvas: true} : item)}\r\n        case \"CHANGE-COPY-STATUS\" :\r\n            return {...state, copyStatus: action.status}\r\n        case \"ADD-FIGURE\" :\r\n            let draggableFigure = state.figures.find(i => i.id === state.draggableFigureId) as FigureType\r\n            let newCanvasFigure = {x: action.x, y: action.y, type: draggableFigure.id === '1' ? 'circle' : 'square',id: v1()}\r\n            return {...state, canvasFigures: [...state.canvasFigures, newCanvasFigure]}\r\n        case \"CHOOSE-FIGURE\" :\r\n            return {...state, chooseFigure: action.figure}\r\n        case \"DELETE-FIGURE\" :\r\n            return {...state, canvasFigures: state.canvasFigures.filter(i => i.id !== state.chooseFigure.id), chooseFigure: {} as CanvasFigureType}\r\n        case \"SET-FIGURES\" :\r\n            return {...state, canvasFigures: action.figures}\r\n        case \"SET-IS-CURSOR\" :\r\n            return {...state, isCursorOverCanvas: action.isCursorOverCanvas}\r\n        case \"SET-MOUSE-DOWN\" :\r\n            return {...state, mouseDown: action.mouseDown}\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n//Actions\r\nexport const dragStartedAC = (figureId: string) => ({type: \"DRAG-STARTED\", figureId} as const)\r\nexport const changeCanvasStatusAC = () => ({type: \"CHANGE-CANVAS-STATUS\"} as const)\r\nexport const changeCopyStatusAC = (status: boolean) => ({type: \"CHANGE-COPY-STATUS\", status} as const)\r\nexport const addFigureAC = (x: number, y: number) => ({type: \"ADD-FIGURE\", x, y} as const)\r\nexport const deleteFigureAC = () => ({type: \"DELETE-FIGURE\"} as const)\r\nexport const chooseFigureAC = (figure: CanvasFigureType) => ({type: \"CHOOSE-FIGURE\", figure} as const)\r\nexport const setFiguresAC = (figures: Array<CanvasFigureType>) => ({type: \"SET-FIGURES\", figures} as const)\r\nexport const setIsCursorAC = (isCursorOverCanvas: boolean) => ({type: \"SET-IS-CURSOR\", isCursorOverCanvas} as const)\r\nexport const setMouseDownAC = (mouseDown: boolean) => ({type: \"SET-MOUSE-DOWN\", mouseDown} as const)\r\n\r\n\r\n//Types\r\ntype InitialStateType = {\r\n    figures: Array<FigureType>\r\n    draggableFigureId: string\r\n    copyStatus: boolean\r\n    canvasFigures: Array<CanvasFigureType>\r\n    chooseFigure: CanvasFigureType\r\n    isCursorOverCanvas: boolean\r\n    mouseDown: boolean\r\n}\r\ntype ActionType = ReturnType<typeof dragStartedAC>\r\n                | ReturnType<typeof changeCanvasStatusAC>\r\n                | ReturnType<typeof changeCopyStatusAC>\r\n                | ReturnType<typeof addFigureAC>\r\n                | ReturnType<typeof deleteFigureAC>\r\n                | ReturnType<typeof chooseFigureAC>\r\n                | ReturnType<typeof setFiguresAC>\r\n                | ReturnType<typeof setIsCursorAC>\r\n                | ReturnType<typeof setMouseDownAC>\r\n\r\nexport type FigureType = {\r\n    id: string\r\n    isCanvas: boolean\r\n    style: {}\r\n}\r\n\r\nexport type CanvasFigureType = {\r\n    x: number\r\n    y: number\r\n    type: string\r\n    id: string\r\n}\r\n","import React from \"react\";\r\nimport {FigureType} from \"../../../../bll/figures-reducer\";\r\n\r\ntype FigurePropsType = {\r\n    figureData: FigureType\r\n    startDragging: (figureId: string) => void\r\n}\r\n\r\nexport const Figure: React.FC<FigurePropsType> = ({figureData, startDragging}) => {\r\n\r\n    const dragStartHandler = () => {\r\n        startDragging(figureData.id)\r\n    }\r\n\r\n    return (\r\n        <div draggable style={{display: \"flex\", flexDirection: \"column\"}}>\r\n            <div draggable style={figureData.style} onDragStart={dragStartHandler}>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, {DragEvent} from \"react\";\r\nimport s from \"./FiguresField.module.css\"\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {AppRootStateType} from \"../../../bll/store\";\r\nimport {changeCanvasStatusAC, changeCopyStatusAC, dragStartedAC, FigureType} from \"../../../bll/figures-reducer\";\r\nimport {Figure} from \"./figure/Figure\";\r\n\r\nexport const FiguresField = () => {\r\n    //HOOK\r\n    const figures = useSelector<AppRootStateType, Array<FigureType>>(state => state.figures.figures)\r\n    const dispatch = useDispatch()\r\n\r\n    const startDragging = (figureId: string) => {\r\n        dispatch(dragStartedAC(figureId))\r\n    }\r\n\r\n    const changeCopyStatus = () => {\r\n        dispatch(changeCopyStatusAC(true))\r\n    }\r\n\r\n    const onDragOverHandler = (e: DragEvent<HTMLDivElement>) => {\r\n        e.preventDefault()\r\n    }\r\n\r\n    const endDraggingFigure = (e: DragEvent<HTMLDivElement>) => {\r\n        e.preventDefault()\r\n        dispatch(changeCanvasStatusAC())\r\n    }\r\n\r\n    return (\r\n        <div className={s.figuresField} onDragStart={changeCopyStatus} onDragOver={onDragOverHandler} onDrop={endDraggingFigure} >\r\n            <h1>Figures</h1>\r\n            {figures.map(item => <Figure key={item.id} figureData={item} startDragging={startDragging}/>)}\r\n        </div>\r\n    )\r\n}","import React, {DragEvent, useEffect, useRef} from \"react\";\r\nimport s from \"../CanvasField.module.css\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {AppRootStateType} from \"../../../../bll/store\";\r\nimport {\r\n    addFigureAC,\r\n    CanvasFigureType,\r\n    chooseFigureAC,\r\n    deleteFigureAC,\r\n    setFiguresAC, setIsCursorAC, setMouseDownAC\r\n} from \"../../../../bll/figures-reducer\";\r\n\r\nexport const Canvas = () => {\r\n    const width = 730;\r\n    const height = 650;\r\n    const figureWidth = 100;\r\n    const figureHeight = 100;\r\n\r\n    //HOOK\r\n    const canvasRef = useRef<any>(null)\r\n    const dispatch = useDispatch()\r\n    const canvasFigures = useSelector<AppRootStateType, Array<CanvasFigureType>>(state => state.figures.canvasFigures)\r\n    const chooseFigure = useSelector<AppRootStateType, CanvasFigureType>(state => state.figures.chooseFigure)\r\n    const copyStatus = useSelector<AppRootStateType, boolean>(state => state.figures.copyStatus)\r\n    const mouseDown = useSelector<AppRootStateType, boolean>( state => state.figures.mouseDown)\r\n\r\n    useEffect(() => {\r\n        const canvas = canvasRef.current\r\n        const ctx = canvas.getContext('2d')\r\n        ctx.clearRect(0, 0, width, height)\r\n        ctx.beginPath()\r\n        canvasFigures.forEach(figure => {\r\n            if(figure.id !== chooseFigure.id) {\r\n                drawFigure(figure, ctx)\r\n            }\r\n        })\r\n    }, [canvasFigures, chooseFigure])\r\n\r\n    useEffect(() => {\r\n        const canvas = canvasRef.current\r\n        const ctx = canvas.getContext('2d')\r\n        if (chooseFigure) {\r\n            drawFigure(chooseFigure, ctx)\r\n        }\r\n        document.onkeydown = (e) => {\r\n            if (e.key === 'Delete' && chooseFigure) {\r\n                dispatch(deleteFigureAC())\r\n            }\r\n        }\r\n    }, [chooseFigure, canvasFigures])\r\n\r\n\r\n\r\n    const drawFigure = (figure: CanvasFigureType, ctx: any) => {\r\n        ctx.lineWidth = 1;\r\n        if (figure.id === chooseFigure.id) {\r\n            ctx.lineWidth = 4\r\n        }\r\n        ctx.strokeStyle = 'black'\r\n        if (figure.type === \"square\") {\r\n\r\n            ctx.fillStyle = 'green'\r\n            ctx.fillRect(figure.x, figure.y, figureWidth, figureHeight)\r\n            ctx.strokeRect(figure.x, figure.y, figureWidth, figureHeight)\r\n            ctx.stroke()\r\n        }\r\n        if (figure.type === \"circle\") {\r\n            ctx.fillStyle = 'blue'\r\n            ctx.arc(\r\n                figure.x + figureWidth / 2,\r\n                figure.y + figureHeight / 2,\r\n                figureWidth / 2,\r\n                0,\r\n                2 * Math.PI,\r\n                true\r\n            )\r\n            ctx.fill()\r\n            ctx.stroke();\r\n            ctx.beginPath();\r\n        }\r\n\r\n    }\r\n    const cursorInFigure = (x: number, y: number, figure: CanvasFigureType) => x > figure.x && x < figure.x + figureWidth && y > figure.y && y < figure.y + figureHeight\r\n\r\n\r\n    const onDragOver = (e: DragEvent<HTMLCanvasElement>) => {\r\n        e.preventDefault()\r\n    }\r\n    const onMouseDown = (e: any) => {\r\n        e.stopPropagation()\r\n        const x = e.pageX - canvasRef.current.offsetLeft\r\n        const y = e.pageY - canvasRef.current.offsetTop\r\n\r\n        let isCursorOnAnyFigure = false\r\n        dispatch(setMouseDownAC(true))\r\n        canvasFigures.forEach(figure => {\r\n            if (cursorInFigure(x, y, figure)) {\r\n                dispatch(chooseFigureAC(figure))\r\n                isCursorOnAnyFigure = true;\r\n            }\r\n        })\r\n\r\n        if (!isCursorOnAnyFigure) {\r\n            dispatch(chooseFigureAC({} as CanvasFigureType))\r\n        }\r\n\r\n    }\r\n    const onMouseUp = () => {\r\n        dispatch(setMouseDownAC(false))\r\n    }\r\n    const onMouseMove = (e: any) => {\r\n        e.stopPropagation()\r\n\r\n        const x = e.pageX - canvasRef.current.offsetLeft\r\n        const y = e.pageY - canvasRef.current.offsetTop\r\n\r\n        if (chooseFigure && mouseDown) {\r\n            dispatch(setFiguresAC(canvasFigures.map(figure => {\r\n                if (figure.id === chooseFigure.id) {\r\n                    figure.x = x - figureWidth / 2\r\n                    figure.y = y - figureHeight / 2\r\n                }\r\n                return figure\r\n            })))\r\n        }\r\n    }\r\n\r\n    const onDrop = (e: DragEvent<HTMLCanvasElement>) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        const x = e.pageX - canvasRef.current.offsetLeft - figureWidth / 2\r\n        const y = e.pageY - canvasRef.current.offsetTop - figureHeight / 2\r\n        if (copyStatus) {\r\n            dispatch(addFigureAC(x, y))\r\n        }\r\n    }\r\n\r\n    const onMouseEnter = (e: any) => {\r\n        dispatch(setIsCursorAC(true))\r\n    }\r\n\r\n    const onMouseOut = (e: any) => {\r\n        dispatch(setIsCursorAC(false))\r\n    }\r\n\r\n    return (\r\n        <div className={s.canvasContainer}>\r\n            <canvas ref={canvasRef}\r\n                    onDragOver={onDragOver}\r\n                    onMouseDown={onMouseDown}\r\n                    onMouseUp={onMouseUp}\r\n                    onMouseMove={onMouseMove}\r\n                    onDrop={onDrop}\r\n                    onMouseEnter={onMouseEnter}\r\n                    onMouseOut={onMouseOut}\r\n                    width={width}\r\n                    height={height}\r\n            />\r\n        </div>\r\n    )\r\n}","import React from \"react\";\r\nimport s from \"./CanvasField.module.css\"\r\nimport {useDispatch} from \"react-redux\";\r\nimport {changeCopyStatusAC} from \"../../../bll/figures-reducer\";\r\nimport {Canvas} from \"./canvas/Canvas\";\r\n\r\nexport const CanvasField = () => {\r\n\r\n    //HOOK\r\n    const dispatch = useDispatch()\r\n\r\n    const changeStatusHandler = () => {\r\n        dispatch(changeCopyStatusAC(false))\r\n    }\r\n\r\n    return (\r\n        <div className={s.canvasField} onDragStart={changeStatusHandler}>\r\n            <h1>Canvas</h1>\r\n            <Canvas/>\r\n        </div>\r\n    )\r\n}","import React, {DragEvent} from 'react';\nimport s from './App.module.css';\nimport { FiguresField } from './components/figuresField/FiguresField';\nimport {CanvasField} from \"./components/canvasField/CanvasField\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {CanvasFigureType, deleteFigureAC} from \"../bll/figures-reducer\";\nimport {AppRootStateType} from \"../bll/store\";\n\nfunction App() {\n    //HOOK\n    const dispatch = useDispatch()\n    const chooseFigure = useSelector<AppRootStateType, CanvasFigureType>(state => state.figures.chooseFigure)\n    const isCursorOverCanvas = useSelector<AppRootStateType, boolean>( state => state.figures.isCursorOverCanvas)\n    const mouseDown = useSelector<AppRootStateType, boolean>( state => state.figures.mouseDown)\n\n    const onDragOverHandler = (e: DragEvent<HTMLDivElement>) => {\n        e.preventDefault()\n    }\n    const deleteCanvasFigure = () => {\n        dispatch(deleteFigureAC())\n    }\n\n    const onMouseOutside = (e: any) => {\n        debugger\n        if (chooseFigure && !isCursorOverCanvas && mouseDown) {\n            dispatch(deleteFigureAC())\n        }\n    }\n\n  return (\n    <div className={s.app} onDragOver={onDragOverHandler} onMouseUp={onMouseOutside}>\n        <div className={s.fieldsContainer}>\n            <FiguresField/>\n            <CanvasField/>\n        </div>\n        <div className={s.buttonContainer}>\n            <button onClick={deleteCanvasFigure}>Delete Figure</button>\n        </div>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {combineReducers, createStore} from \"redux\";\r\nimport {figuresReducer} from \"./figures-reducer\";\r\nimport {loadState, saveState} from \"./utils/localStorage-utils\";\r\n\r\nconst rootReducer = combineReducers({\r\n    figures: figuresReducer,\r\n})\r\n\r\nexport const store = createStore(rootReducer, loadState())\r\n\r\nexport type AppRootStateType = ReturnType<typeof rootReducer>\r\n\r\nstore.subscribe( () => {\r\n    saveState({\r\n        figures: store.getState().figures\r\n    })\r\n})\r\n\r\n// @ts-ignore\r\nwindow.store = store;","import { AppRootStateType } from \"../store\";\r\n\r\nexport const loadState = () => {\r\n    try {\r\n        const serializedState = localStorage.getItem('state');\r\n        if (serializedState === null) {\r\n            return undefined;\r\n        }\r\n        return JSON.parse(serializedState);\r\n    } catch (err) {\r\n        return undefined;\r\n    }\r\n};\r\n\r\nexport const saveState = (state: AppRootStateType) => {\r\n    try {\r\n        const serializedState = JSON.stringify(state);\r\n        localStorage.setItem('state', serializedState);\r\n    } catch {\r\n        // ignore write errors\r\n    }\r\n} ;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './ui/App';\nimport reportWebVitals from './reportWebVitals';\nimport {Provider} from \"react-redux\";\nimport {store} from \"./bll/store\";\n\nReactDOM.render(\n    <Provider store={store}>\n        <App/>\n    </Provider>,\n    document.getElementById('root')\n);\n\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"canvasField\":\"CanvasField_canvasField__4DhHx\",\"canvasContainer\":\"CanvasField_canvasContainer__3B7n7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__3Sw4P\",\"fieldsContainer\":\"App_fieldsContainer__2qJaf\",\"buttonContainer\":\"App_buttonContainer__15oyy\"};"],"sourceRoot":""}