(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{11:function(e,t,n){e.exports={figuresField:"FiguresField_figuresField__dxe6A"}},17:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(4),c=n.n(a),i=(n(17),n(6)),u=n.n(i),o=n(11),s=n.n(o),f=n(3),g=n(12),l=n(2),b=n(25),d={figures:[{id:"1",isCanvas:!1,style:{width:"100px",height:"100px",backgroundColor:"blue",borderRadius:"50%",margin:"30px",border:"1px solid black"}},{id:"2",isCanvas:!1,style:{width:"100px",height:"100px",backgroundColor:"green",margin:"30px",border:"1px solid black"}}],draggableFigureId:"",copyStatus:!0,canvasFigures:[],chooseFigure:{},isCursorOverCanvas:!1,mouseDown:!0},O=function(e){return{type:"CHANGE-COPY-STATUS",status:e}},p=function(e){return{type:"CHOOSE-FIGURE",figure:e}},j=function(e){return{type:"SET-IS-CURSOR",isCursorOverCanvas:e}},v=function(e){return{type:"SET-MOUSE-DOWN",mouseDown:e}},h=n(1),y=function(e){var t=e.figureData,n=e.startDragging;return Object(h.jsx)("div",{draggable:!0,style:{display:"flex",flexDirection:"column"},children:Object(h.jsx)("div",{draggable:!0,style:t.style,onDragStart:function(){n(t.id)}})})},C=function(){var e=Object(f.c)((function(e){return e.figures.figures})),t=Object(f.b)(),n=function(e){t(function(e){return{type:"DRAG-STARTED",figureId:e}}(e))};return Object(h.jsxs)("div",{className:s.a.figuresField,onDragStart:function(){t(O(!0))},onDragOver:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault(),t({type:"CHANGE-CANVAS-STATUS"})},children:[Object(h.jsx)("h1",{children:"Figures"}),e.map((function(e){return Object(h.jsx)(y,{figureData:e,startDragging:n},e.id)}))]})},x=n(5),E=n.n(x),S=function(){var e=100,t=100,n=Object(r.useRef)(null),a=Object(f.b)(),c=Object(f.c)((function(e){return e.figures.canvasFigures})),i=Object(f.c)((function(e){return e.figures.chooseFigure})),u=Object(f.c)((function(e){return e.figures.copyStatus})),o=Object(f.c)((function(e){return e.figures.mouseDown}));Object(r.useEffect)((function(){var e=n.current.getContext("2d");e.clearRect(0,0,730,650),e.beginPath(),c.forEach((function(t){t.id!==i.id&&s(t,e)}))}),[c,i]),Object(r.useEffect)((function(){var e=n.current.getContext("2d");i&&s(i,e),document.onkeydown=function(e){"Delete"===e.key&&i&&a({type:"DELETE-FIGURE"})}}),[i,c]);var s=function(n,r){r.lineWidth=1,n.id===i.id&&(r.lineWidth=4),r.strokeStyle="black","square"===n.type&&(r.fillStyle="green",r.fillRect(n.x,n.y,e,t),r.strokeRect(n.x,n.y,e,t),r.stroke()),"circle"===n.type&&(r.fillStyle="blue",r.arc(n.x+50,n.y+50,50,0,2*Math.PI,!0),r.fill(),r.stroke(),r.beginPath())};return Object(h.jsx)("div",{className:E.a.canvasContainer,children:Object(h.jsx)("canvas",{ref:n,onDragOver:function(e){e.preventDefault()},onMouseDown:function(r){r.stopPropagation();var i=r.pageX-n.current.offsetLeft,u=r.pageY-n.current.offsetTop,o=!1;a(v(!0)),c.forEach((function(n){(function(n,r,a){return n>a.x&&n<a.x+e&&r>a.y&&r<a.y+t})(i,u,n)&&(a(p(n)),o=!0)})),o||a(p({}))},onMouseUp:function(){a(v(!1))},onMouseMove:function(e){e.stopPropagation();var t=e.pageX-n.current.offsetLeft,r=e.pageY-n.current.offsetTop;i&&o&&a({type:"SET-FIGURES",figures:c.map((function(e){return e.id===i.id&&(e.x=t-50,e.y=r-50),e}))})},onDrop:function(e){e.preventDefault(),e.stopPropagation();var t=e.pageX-n.current.offsetLeft-50,r=e.pageY-n.current.offsetTop-50;u&&a(function(e,t){return{type:"ADD-FIGURE",x:e,y:t}}(t,r))},onMouseEnter:function(e){a(j(!0))},onMouseOut:function(e){a(j(!1))},width:730,height:650})})},D=function(){var e=Object(f.b)();return Object(h.jsxs)("div",{className:E.a.canvasField,onDragStart:function(){e(O(!1))},children:[Object(h.jsx)("h1",{children:"Canvas"}),Object(h.jsx)(S,{})]})};var F=function(){var e=Object(f.b)(),t=Object(f.c)((function(e){return e.figures.chooseFigure})),n=Object(f.c)((function(e){return e.figures.isCursorOverCanvas})),r=Object(f.c)((function(e){return e.figures.mouseDown}));return Object(h.jsxs)("div",{className:u.a.app,onDragOver:function(e){e.preventDefault()},onMouseUp:function(a){t&&!n&&r&&e({type:"DELETE-FIGURE"})},children:[Object(h.jsxs)("div",{className:u.a.fieldsContainer,children:[Object(h.jsx)(C,{}),Object(h.jsx)(D,{})]}),Object(h.jsx)("div",{className:u.a.buttonContainer,children:Object(h.jsx)("button",{onClick:function(){e({type:"DELETE-FIGURE"})},children:"Delete Figure"})})]})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,26)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},m=n(10),I=Object(m.a)({figures:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DRAG-STARTED":return Object(l.a)(Object(l.a)({},e),{},{draggableFigureId:t.figureId});case"CHANGE-CANVAS-STATUS":return Object(l.a)(Object(l.a)({},e),{},{figures:e.figures.map((function(t){return t.id===e.draggableFigureId?Object(l.a)(Object(l.a)({},t),{},{isCanvas:!0}):t}))});case"CHANGE-COPY-STATUS":return Object(l.a)(Object(l.a)({},e),{},{copyStatus:t.status});case"ADD-FIGURE":var n=e.figures.find((function(t){return t.id===e.draggableFigureId})),r={x:t.x,y:t.y,type:"1"===n.id?"circle":"square",id:Object(b.a)()};return Object(l.a)(Object(l.a)({},e),{},{canvasFigures:[].concat(Object(g.a)(e.canvasFigures),[r])});case"CHOOSE-FIGURE":return Object(l.a)(Object(l.a)({},e),{},{chooseFigure:t.figure});case"DELETE-FIGURE":return Object(l.a)(Object(l.a)({},e),{},{canvasFigures:e.canvasFigures.filter((function(t){return t.id!==e.chooseFigure.id})),chooseFigure:{}});case"SET-FIGURES":return Object(l.a)(Object(l.a)({},e),{},{canvasFigures:t.figures});case"SET-IS-CURSOR":return Object(l.a)(Object(l.a)({},e),{},{isCursorOverCanvas:t.isCursorOverCanvas});case"SET-MOUSE-DOWN":return Object(l.a)(Object(l.a)({},e),{},{mouseDown:t.mouseDown});default:return e}}}),R=Object(m.b)(I,function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}());R.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){}}({figures:R.getState().figures})})),window.store=R,c.a.render(Object(h.jsx)(f.a,{store:R,children:Object(h.jsx)(F,{})}),document.getElementById("root")),T()},5:function(e,t,n){e.exports={canvasField:"CanvasField_canvasField__4DhHx",canvasContainer:"CanvasField_canvasContainer__3B7n7"}},6:function(e,t,n){e.exports={app:"App_app__3Sw4P",fieldsContainer:"App_fieldsContainer__2qJaf",buttonContainer:"App_buttonContainer__15oyy"}}},[[23,1,2]]]);
//# sourceMappingURL=main.28645490.chunk.js.map