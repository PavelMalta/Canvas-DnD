{"version":3,"sources":["ui/components/figuresField/FiguresField.module.css","bll/figures-reducer.ts","ui/components/figuresField/figure/Figure.tsx","ui/components/figuresField/FiguresField.tsx","ui/components/canvasField/canvas/Canvas.tsx","ui/components/canvasField/CanvasField.tsx","ui/App.tsx","reportWebVitals.ts","bll/store.ts","bll/utils/localStorage-utils.ts","index.tsx","ui/components/canvasField/CanvasField.module.css","ui/App.module.css"],"names":["module","exports","initialState","figures","id","isCanvas","style","width","height","backgroundColor","borderRadius","margin","border","draggableFigureId","copyStatus","canvasFigures","chooseFigure","changeCopyStatusAC","status","type","chooseFigureAC","figure","Figure","figureData","startDragging","draggable","display","flexDirection","onDragStart","FiguresField","useSelector","state","dispatch","useDispatch","figureId","dragStartedAC","className","s","figuresField","onDragOver","e","preventDefault","onDrop","map","item","Canvas","figureWidth","figureHeight","canvasRef","useRef","useState","mouseDown","setMouseDown","useEffect","ctx","current","getContext","clearRect","beginPath","forEach","drawFigure","document","onkeydown","key","lineWidth","strokeStyle","fillStyle","fillRect","x","y","strokeRect","stroke","arc","Math","PI","fill","canvasContainer","ref","onMouseDown","stopPropagation","pageX","offsetLeft","pageY","offsetTop","isCursorOnAnyFigure","cursorInFigure","onMouseUp","onMouseMove","addFigureAC","CanvasField","canvasField","App","app","fieldsContainer","buttonContainer","onClick","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","rootReducer","combineReducers","action","draggableFigure","find","i","newCanvasFigure","v1","filter","store","createStore","serializedState","localStorage","getItem","JSON","parse","err","loadState","subscribe","stringify","setItem","saveState","getState","window","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.f04d8176.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"figuresField\":\"FiguresField_figuresField__dxe6A\"};","import { v1 } from \"uuid\"\r\n\r\nexport const circleStyle = {\r\n    width: \"100px\",\r\n    height: \"100px\",\r\n    backgroundColor: \"blue\",\r\n    borderRadius: \"50%\",\r\n    margin: \"30px\",\r\n    border: \"1px solid black\"\r\n}\r\n\r\nexport const squareStyle = {\r\n    width: \"100px\",\r\n    height: \"100px\",\r\n    backgroundColor: \"green\",\r\n    margin: \"30px\",\r\n    border: \"1px solid black\"\r\n}\r\nconst figures = [{id: \"1\", isCanvas: false, style: circleStyle}, {id: \"2\", isCanvas: false, style: squareStyle}]\r\n\r\nconst initialState = {\r\n    figures: figures,\r\n    draggableFigureId: \"\",\r\n    copyStatus: true,\r\n    canvasFigures: [] as Array<CanvasFigureType>,\r\n    chooseFigure: {} as CanvasFigureType\r\n}\r\n\r\nexport const figuresReducer = (state: InitialStateType = initialState, action: ActionType): InitialStateType => {\r\n    switch (action.type) {\r\n        case \"DRAG-STARTED\" :\r\n            return {...state, draggableFigureId: action.figureId}\r\n        case \"CHANGE-CANVAS-STATUS\" :\r\n            return {...state, figures: state.figures.map(item => item.id === state.draggableFigureId ? {...item, isCanvas: true} : item)}\r\n        case \"CHANGE-COPY-STATUS\" :\r\n            return {...state, copyStatus: action.status}\r\n        case \"ADD-FIGURE\" :\r\n            let draggableFigure = state.figures.find(i => i.id === state.draggableFigureId) as FigureType\r\n            let newCanvasFigure = {x: action.x, y: action.y, type: draggableFigure.id === '1' ? 'circle' : 'square',id: v1()}\r\n            return {...state, canvasFigures: [...state.canvasFigures, newCanvasFigure]}\r\n        case \"CHOOSE-FIGURE\" :\r\n            return {...state, chooseFigure: action.figure}\r\n        case \"DELETE-FIGURE\" :\r\n            return {...state, canvasFigures: state.canvasFigures.filter(i => i.id !== state.chooseFigure.id), chooseFigure: {} as CanvasFigureType}\r\n        case \"SET-FIGURES\" :\r\n            return {...state, canvasFigures: action.figures}\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n//Actions\r\nexport const dragStartedAC = (figureId: string) => ({type: \"DRAG-STARTED\", figureId} as const)\r\nexport const changeCanvasStatusAC = () => ({type: \"CHANGE-CANVAS-STATUS\"} as const)\r\nexport const changeCopyStatusAC = (status: boolean) => ({type: \"CHANGE-COPY-STATUS\", status} as const)\r\nexport const addFigureAC = (x: number, y: number) => ({type: \"ADD-FIGURE\", x, y} as const)\r\nexport const deleteFigureAC = () => ({type: \"DELETE-FIGURE\"} as const)\r\nexport const chooseFigureAC = (figure: CanvasFigureType) => ({type: \"CHOOSE-FIGURE\", figure} as const)\r\nexport const setFiguresAC = (figures: Array<CanvasFigureType>) => ({type: \"SET-FIGURES\", figures} as const)\r\n\r\n\r\n//Types\r\ntype InitialStateType = {\r\n    figures: Array<FigureType>\r\n    draggableFigureId: string\r\n    copyStatus: boolean\r\n    canvasFigures: Array<CanvasFigureType>\r\n    chooseFigure: CanvasFigureType\r\n}\r\ntype ActionType = ReturnType<typeof dragStartedAC>\r\n                | ReturnType<typeof changeCanvasStatusAC>\r\n                | ReturnType<typeof changeCopyStatusAC>\r\n                | ReturnType<typeof addFigureAC>\r\n                | ReturnType<typeof deleteFigureAC>\r\n                | ReturnType<typeof chooseFigureAC>\r\n                | ReturnType<typeof setFiguresAC>\r\n\r\nexport type FigureType = {\r\n    id: string\r\n    isCanvas: boolean\r\n    style: {}\r\n}\r\n\r\nexport type CanvasFigureType = {\r\n    x: number\r\n    y: number\r\n    type: string\r\n    id: string\r\n}\r\n","import React from \"react\";\r\nimport {FigureType} from \"../../../../bll/figures-reducer\";\r\n\r\ntype FigurePropsType = {\r\n    figureData: FigureType\r\n    startDragging: (figureId: string) => void\r\n}\r\n\r\nexport const Figure: React.FC<FigurePropsType> = ({figureData, startDragging}) => {\r\n\r\n    const dragStartHandler = () => {\r\n        startDragging(figureData.id)\r\n    }\r\n\r\n    return (\r\n        <div draggable style={{display: \"flex\", flexDirection: \"column\"}}>\r\n            <div draggable style={figureData.style} onDragStart={dragStartHandler}>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, {DragEvent} from \"react\";\r\nimport s from \"./FiguresField.module.css\"\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {AppRootStateType} from \"../../../bll/store\";\r\nimport {changeCanvasStatusAC, changeCopyStatusAC, dragStartedAC, FigureType} from \"../../../bll/figures-reducer\";\r\nimport {Figure} from \"./figure/Figure\";\r\n\r\nexport const FiguresField = () => {\r\n    //HOOK\r\n    const figures = useSelector<AppRootStateType, Array<FigureType>>(state => state.figures.figures)\r\n    const dispatch = useDispatch()\r\n\r\n    const startDragging = (figureId: string) => {\r\n        dispatch(dragStartedAC(figureId))\r\n    }\r\n\r\n    const changeCopyStatus = () => {\r\n        dispatch(changeCopyStatusAC(true))\r\n    }\r\n\r\n    const onDragOverHandler = (e: DragEvent<HTMLDivElement>) => {\r\n        e.preventDefault()\r\n    }\r\n\r\n    const endDraggingFigure = (e: DragEvent<HTMLDivElement>) => {\r\n        e.preventDefault()\r\n        dispatch(changeCanvasStatusAC())\r\n    }\r\n\r\n    return (\r\n        <div className={s.figuresField} onDragStart={changeCopyStatus} onDragOver={onDragOverHandler} onDrop={endDraggingFigure} >\r\n            <h1>Figures</h1>\r\n            {figures.map(item => <Figure key={item.id} figureData={item} startDragging={startDragging}/>)}\r\n        </div>\r\n    )\r\n}","import React, {DragEvent, useEffect, useRef, useState} from \"react\";\r\nimport s from \"../CanvasField.module.css\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {AppRootStateType} from \"../../../../bll/store\";\r\nimport {\r\n    addFigureAC,\r\n    CanvasFigureType,\r\n    chooseFigureAC,\r\n    deleteFigureAC,\r\n    setFiguresAC\r\n} from \"../../../../bll/figures-reducer\";\r\n\r\nexport const Canvas = () => {\r\n    const width = 730;\r\n    const height = 650;\r\n    const figureWidth = 100;\r\n    const figureHeight = 100;\r\n\r\n    //HOOK\r\n    const canvasRef = useRef<any>(null)\r\n    const [mouseDown, setMouseDown] = useState(true)\r\n    const dispatch = useDispatch()\r\n    const canvasFigures = useSelector<AppRootStateType, Array<CanvasFigureType>>(state => state.figures.canvasFigures)\r\n    const chooseFigure = useSelector<AppRootStateType, CanvasFigureType>(state => state.figures.chooseFigure)\r\n    const copyStatus = useSelector<AppRootStateType, boolean>(state => state.figures.copyStatus)\r\n\r\n    useEffect(() => {\r\n        const canvas = canvasRef.current\r\n        const ctx = canvas.getContext('2d')\r\n        ctx.clearRect(0, 0, width, height)\r\n        ctx.beginPath()\r\n        canvasFigures.forEach(figure => {\r\n            if(figure.id !== chooseFigure.id) {\r\n                drawFigure(figure, ctx)\r\n            }\r\n        })\r\n    }, [canvasFigures, chooseFigure])\r\n\r\n    useEffect(() => {\r\n        const canvas = canvasRef.current\r\n        const ctx = canvas.getContext('2d')\r\n        if (chooseFigure) {\r\n            drawFigure(chooseFigure, ctx)\r\n        }\r\n        document.onkeydown = e => {\r\n            if (e.key === 'Delete' && chooseFigure) {\r\n                dispatch(deleteFigureAC())\r\n            }\r\n        }\r\n    }, [chooseFigure, canvasFigures])\r\n\r\n\r\n\r\n    const drawFigure = (figure: CanvasFigureType, ctx: any) => {\r\n        ctx.lineWidth = 1;\r\n        if (figure.id === chooseFigure.id) {\r\n            ctx.lineWidth = 4\r\n        }\r\n        ctx.strokeStyle = 'black'\r\n        if (figure.type === \"square\") {\r\n\r\n            ctx.fillStyle = 'green'\r\n            ctx.fillRect(figure.x, figure.y, figureWidth, figureHeight)\r\n            ctx.strokeRect(figure.x, figure.y, figureWidth, figureHeight)\r\n            ctx.stroke()\r\n        }\r\n        if (figure.type === \"circle\") {\r\n            ctx.fillStyle = 'blue'\r\n            ctx.arc(\r\n                figure.x + figureWidth / 2,\r\n                figure.y + figureHeight / 2,\r\n                figureWidth / 2,\r\n                0,\r\n                2 * Math.PI,\r\n                true\r\n            )\r\n            ctx.fill()\r\n            ctx.stroke();\r\n            ctx.beginPath();\r\n        }\r\n\r\n    }\r\n    const cursorInFigure = (x: number, y: number, figure: CanvasFigureType) => x > figure.x && x < figure.x + figureWidth && y > figure.y && y < figure.y + figureHeight\r\n\r\n\r\n    const onDragOver = (e: DragEvent<HTMLCanvasElement>) => {\r\n        e.preventDefault()\r\n    }\r\n    const onMouseDown = (e: any) => {\r\n        e.stopPropagation()\r\n        const x = e.pageX - canvasRef.current.offsetLeft\r\n        const y = e.pageY - canvasRef.current.offsetTop\r\n\r\n        let isCursorOnAnyFigure = false\r\n        setMouseDown(true)\r\n        canvasFigures.forEach(figure => {\r\n            // @ts-ignore\r\n            if (cursorInFigure(x, y, figure)) {\r\n                dispatch(chooseFigureAC(figure))\r\n                isCursorOnAnyFigure = true;\r\n            }\r\n        })\r\n\r\n        if (!isCursorOnAnyFigure) {\r\n            dispatch(chooseFigureAC({} as CanvasFigureType))\r\n        }\r\n\r\n    }\r\n    const onMouseUp = () => {\r\n        setMouseDown(false)\r\n    }\r\n    const onMouseMove = (e: any) => {\r\n        e.stopPropagation()\r\n\r\n        const x = e.pageX - canvasRef.current.offsetLeft\r\n        const y = e.pageY - canvasRef.current.offsetTop\r\n\r\n        if (chooseFigure && mouseDown) {\r\n            dispatch(setFiguresAC(canvasFigures.map(figure => {\r\n                if (figure.id === chooseFigure.id) {\r\n                    figure.x = x - figureWidth / 2\r\n                    figure.y = y - figureHeight / 2\r\n                }\r\n                return figure\r\n            })))\r\n        }\r\n    }\r\n\r\n    const onDrop = (e: DragEvent<HTMLCanvasElement>) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        const x = e.pageX - canvasRef.current.offsetLeft - figureWidth / 2\r\n        const y = e.pageY - canvasRef.current.offsetTop - figureHeight / 2\r\n        if (copyStatus) {\r\n            dispatch(addFigureAC(x, y))\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={s.canvasContainer}>\r\n            <canvas ref={canvasRef}\r\n                    onDragOver={onDragOver}\r\n                    onMouseDown={onMouseDown}\r\n                    onMouseUp={onMouseUp}\r\n                    onMouseMove={onMouseMove}\r\n                    onDrop={onDrop}\r\n                    width={width}\r\n                    height={height}\r\n            />\r\n        </div>\r\n    )\r\n}","import React from \"react\";\r\nimport s from \"./CanvasField.module.css\"\r\nimport {useDispatch} from \"react-redux\";\r\nimport {changeCopyStatusAC} from \"../../../bll/figures-reducer\";\r\nimport {Canvas} from \"./canvas/Canvas\";\r\n\r\nexport const CanvasField = () => {\r\n\r\n    //HOOK\r\n    const dispatch = useDispatch()\r\n\r\n    const changeStatusHandler = () => {\r\n        dispatch(changeCopyStatusAC(false))\r\n    }\r\n\r\n    return (\r\n        <div className={s.canvasField} onDragStart={changeStatusHandler}>\r\n            <h1>Canvas</h1>\r\n            <Canvas/>\r\n        </div>\r\n    )\r\n}","import React, {DragEvent} from 'react';\nimport s from './App.module.css';\nimport { FiguresField } from './components/figuresField/FiguresField';\nimport {CanvasField} from \"./components/canvasField/CanvasField\";\nimport {useDispatch} from \"react-redux\";\nimport {deleteFigureAC} from \"../bll/figures-reducer\";\n\nfunction App() {\n    //HOOK\n    const dispatch = useDispatch()\n\n    const onDragOverHandler = (e: DragEvent<HTMLDivElement>) => {\n        e.preventDefault()\n    }\n    const deleteCanvasFigure = () => {\n        dispatch(deleteFigureAC())\n    }\n\n  return (\n    <div className={s.app} onDragOver={onDragOverHandler}>\n        <div className={s.fieldsContainer}>\n            <FiguresField/>\n            <CanvasField/>\n        </div>\n        <div className={s.buttonContainer}>\n            <button onClick={deleteCanvasFigure}>Delete Figure</button>\n        </div>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {combineReducers, createStore} from \"redux\";\r\nimport {figuresReducer} from \"./figures-reducer\";\r\nimport {loadState, saveState} from \"./utils/localStorage-utils\";\r\n\r\nconst rootReducer = combineReducers({\r\n    figures: figuresReducer,\r\n})\r\n\r\nexport const store = createStore(rootReducer, loadState())\r\n\r\nexport type AppRootStateType = ReturnType<typeof rootReducer>\r\n\r\nstore.subscribe( () => {\r\n    saveState({\r\n        figures: store.getState().figures\r\n    })\r\n})\r\n\r\n// @ts-ignore\r\nwindow.store = store;","import { AppRootStateType } from \"../store\";\r\n\r\nexport const loadState = () => {\r\n    try {\r\n        const serializedState = localStorage.getItem('state');\r\n        if (serializedState === null) {\r\n            return undefined;\r\n        }\r\n        return JSON.parse(serializedState);\r\n    } catch (err) {\r\n        return undefined;\r\n    }\r\n};\r\n\r\nexport const saveState = (state: AppRootStateType) => {\r\n    try {\r\n        const serializedState = JSON.stringify(state);\r\n        localStorage.setItem('state', serializedState);\r\n    } catch {\r\n        // ignore write errors\r\n    }\r\n} ;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './ui/App';\nimport reportWebVitals from './reportWebVitals';\nimport {Provider} from \"react-redux\";\nimport {store} from \"./bll/store\";\n\nReactDOM.render(\n    <Provider store={store}>\n        <App/>\n    </Provider>,\n    document.getElementById('root')\n);\n\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"canvasField\":\"CanvasField_canvasField__4DhHx\",\"canvasContainer\":\"CanvasField_canvasContainer__3B7n7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__3Sw4P\",\"fieldsContainer\":\"App_fieldsContainer__2qJaf\",\"buttonContainer\":\"App_buttonContainer__15oyy\"};"],"sourceRoot":""}