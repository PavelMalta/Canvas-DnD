(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{13:function(e,t,n){e.exports={figuresField:"FiguresField_figuresField__dxe6A"}},20:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(5),i=n.n(a),c=(n(20),n(8)),u=n.n(c),s=n(13),o=n.n(s),f=n(3),g=n(14),l=n(2),d=n(28),b={figures:[{id:"1",isCanvas:!1,style:{width:"100px",height:"100px",backgroundColor:"blue",borderRadius:"50%",margin:"30px",border:"1px solid black"}},{id:"2",isCanvas:!1,style:{width:"100px",height:"100px",backgroundColor:"green",margin:"30px",border:"1px solid black"}}],draggableFigureId:"",copyStatus:!0,canvasFigures:[],chooseFigure:{}},p=function(e){return{type:"CHANGE-COPY-STATUS",status:e}},j=function(e){return{type:"CHOOSE-FIGURE",figure:e}},O=n(1),v=function(e){var t=e.figureData,n=e.startDragging;return Object(O.jsx)("div",{draggable:!0,style:{display:"flex",flexDirection:"column"},children:Object(O.jsx)("div",{draggable:!0,style:t.style,onDragStart:function(){n(t.id)}})})},h=function(){var e=Object(f.c)((function(e){return e.figures.figures})),t=Object(f.b)(),n=function(e){t(function(e){return{type:"DRAG-STARTED",figureId:e}}(e))};return Object(O.jsxs)("div",{className:o.a.figuresField,onDragStart:function(){t(p(!0))},onDragOver:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault(),t({type:"CHANGE-CANVAS-STATUS"})},children:[Object(O.jsx)("h1",{children:"Figures"}),e.map((function(e){return Object(O.jsx)(v,{figureData:e,startDragging:n},e.id)}))]})},x=n(7),y=n.n(x),F=n(15),S=function(){var e=100,t=100,n=Object(r.useRef)(null),a=Object(r.useState)(!0),i=Object(F.a)(a,2),c=i[0],u=i[1],s=Object(f.b)(),o=Object(f.c)((function(e){return e.figures.canvasFigures})),g=Object(f.c)((function(e){return e.figures.chooseFigure})),l=Object(f.c)((function(e){return e.figures.copyStatus}));Object(r.useEffect)((function(){var e=n.current.getContext("2d");e.clearRect(0,0,730,650),e.beginPath(),o.forEach((function(t){t.id!==g.id&&d(t,e)}))}),[o,g]),Object(r.useEffect)((function(){var e=n.current.getContext("2d");g&&d(g,e),document.onkeydown=function(e){"Delete"===e.key&&g&&s({type:"DELETE-FIGURE"})}}),[g,o]);var d=function(n,r){r.lineWidth=1,n.id===g.id&&(r.lineWidth=4),r.strokeStyle="black","square"===n.type&&(r.fillStyle="green",r.fillRect(n.x,n.y,e,t),r.strokeRect(n.x,n.y,e,t),r.stroke()),"circle"===n.type&&(r.fillStyle="blue",r.arc(n.x+50,n.y+50,50,0,2*Math.PI,!0),r.fill(),r.stroke(),r.beginPath())};return Object(O.jsx)("div",{className:y.a.canvasContainer,children:Object(O.jsx)("canvas",{ref:n,onDragOver:function(e){e.preventDefault()},onMouseDown:function(r){r.stopPropagation();var a=r.pageX-n.current.offsetLeft,i=r.pageY-n.current.offsetTop,c=!1;u(!0),o.forEach((function(n){(function(n,r,a){return n>a.x&&n<a.x+e&&r>a.y&&r<a.y+t})(a,i,n)&&(s(j(n)),c=!0)})),c||s(j({}))},onMouseUp:function(){u(!1)},onMouseMove:function(e){e.stopPropagation();var t=e.pageX-n.current.offsetLeft,r=e.pageY-n.current.offsetTop;g&&c&&s({type:"SET-FIGURES",figures:o.map((function(e){return e.id===g.id&&(e.x=t-50,e.y=r-50),e}))})},onDrop:function(e){e.preventDefault(),e.stopPropagation();var t=e.pageX-n.current.offsetLeft-50,r=e.pageY-n.current.offsetTop-50;l&&s(function(e,t){return{type:"ADD-FIGURE",x:e,y:t}}(t,r))},width:730,height:650})})},D=function(){var e=Object(f.b)();return Object(O.jsxs)("div",{className:y.a.canvasField,onDragStart:function(){e(p(!1))},children:[Object(O.jsx)("h1",{children:"Canvas"}),Object(O.jsx)(S,{})]})};var C=function(){var e=Object(f.b)();return Object(O.jsxs)("div",{className:u.a.app,onDragOver:function(e){e.preventDefault()},children:[Object(O.jsxs)("div",{className:u.a.fieldsContainer,children:[Object(O.jsx)(h,{}),Object(O.jsx)(D,{})]}),Object(O.jsx)("div",{className:u.a.buttonContainer,children:Object(O.jsx)("button",{onClick:function(){e({type:"DELETE-FIGURE"})},children:"Delete Figure"})})]})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,29)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))},A=n(12),T=Object(A.a)({figures:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DRAG-STARTED":return Object(l.a)(Object(l.a)({},e),{},{draggableFigureId:t.figureId});case"CHANGE-CANVAS-STATUS":return Object(l.a)(Object(l.a)({},e),{},{figures:e.figures.map((function(t){return t.id===e.draggableFigureId?Object(l.a)(Object(l.a)({},t),{},{isCanvas:!0}):t}))});case"CHANGE-COPY-STATUS":return Object(l.a)(Object(l.a)({},e),{},{copyStatus:t.status});case"ADD-FIGURE":var n=e.figures.find((function(t){return t.id===e.draggableFigureId})),r={x:t.x,y:t.y,type:"1"===n.id?"circle":"square",id:Object(d.a)()};return Object(l.a)(Object(l.a)({},e),{},{canvasFigures:[].concat(Object(g.a)(e.canvasFigures),[r])});case"CHOOSE-FIGURE":return Object(l.a)(Object(l.a)({},e),{},{chooseFigure:t.figure});case"DELETE-FIGURE":return Object(l.a)(Object(l.a)({},e),{},{canvasFigures:e.canvasFigures.filter((function(t){return t.id!==e.chooseFigure.id})),chooseFigure:{}});case"SET-FIGURES":return Object(l.a)(Object(l.a)({},e),{},{canvasFigures:t.figures});default:return e}}}),I=Object(A.b)(T,function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}());I.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){}}({figures:I.getState().figures})})),window.store=I,i.a.render(Object(O.jsx)(f.a,{store:I,children:Object(O.jsx)(C,{})}),document.getElementById("root")),E()},7:function(e,t,n){e.exports={canvasField:"CanvasField_canvasField__4DhHx",canvasContainer:"CanvasField_canvasContainer__3B7n7"}},8:function(e,t,n){e.exports={app:"App_app__3Sw4P",fieldsContainer:"App_fieldsContainer__2qJaf",buttonContainer:"App_buttonContainer__15oyy"}}},[[26,1,2]]]);
//# sourceMappingURL=main.f04d8176.chunk.js.map